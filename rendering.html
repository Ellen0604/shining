<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Rendering_shining</title>
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<link rel="stylesheet" type="text/css" href="css/general.css">
	<link rel="stylesheet" type="text/css" href="css/rendering.css">
	<link rel="stylesheet" type="text/css" href="css/media.css">
</head>
<body>
	<div id="wrap">
		<header>
			<nav>
				<a href="index.html"><img src="imgs/index/shininglogo.png"></a>
				<ul class="showUl">
					<li><a href="index.html">Home</a></li>
					<li><a href="about.html">About</a></li>
					<li><a href="rendering.html">Rendering</a></li>
					<li><a href="animation.html">3D Animation</a></li>
					<li><a href="bim.html">Bim</a></li>
					<li><a href="contact.html">Contact</a></li>
				</ul>
				<div class="hideNav">
					<img src="imgs/index/nav.png">
					<ul class="hideUl">
						<li><a href="index.html">Home</a></li>
						<li><a href="about.html">About</a></li>
						<li><a href="rendering.html">Rendering</a></li>
						<li><a href="animation.html">3D Animation</a></li>
						<li><a href="bim.html">Bim</a></li>
						<li><a href="contact.html">Contact</a></li>
					</ul>
				</div>	
			</nav>

			<!-- 返回顶部 -->
			<div class="top_btn">
				<img src="imgs/rendering/top.png">
			</div>	
		</header>

		<!-- 内容content -->
		<div class="renderingCon">
			<!-- 轮播 -->
			<div class="carousel">
				<div class="carouselBox">
					<img src="imgs/rendering/Banner (1).jpg">
					<img src="imgs/rendering/Banner (2).jpg">
					<img src="imgs/rendering/Banner (3).jpg">
				</div>
				<!--状态-->
				<ul class="carouselActive">
					<li></li>
					<li></li>
					<li></li>
				</ul>
			</div>
			<!-- 瀑布流 -->
			<div class="waterfall">
				<ul id="flow">
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z1101T5U8.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z1102440O6.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z1102621105.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z1102Z4209.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z1103204a4.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z1103315305.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z110342W02.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z1103546234.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z1103639156.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z1103942428.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z1133944394.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z1103G2403.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z110411A47.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z1133Q94S.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z113403C95.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z11341353I.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z1134304C6.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z113493G23.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z1134JM27.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z113513L10.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z1135225557.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z1135334937.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z1135954a2.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z1135I1I6.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z1135TX03.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z1140205329.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z1140313109.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z1140410615.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z11405042O.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z114055W60.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z114095NC.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z1140A5516.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z1140Q53C.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z1140Z0612.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z114104U13.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z1141330910.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/SHINING (13).jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/SHINING (14).jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/SHINING (15).jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/SHINING (16).jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/SHINING (17).jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/SHINING (18).jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/SHINING (20).jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/SHINING (21).jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/SHINING (35).jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/SHINING (42).jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/SHINING (44).jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/SHINING (46).jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/SHINING (5).jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/SHINING (8).jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/1-150Z1133Q94S.jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/SHINING (53).jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>	
					<li class="flow_img_wrap">
						<img class="flow_img" src="imgs/rendering/SHINING (54).jpg">
						<div class="mask"></div>
						<img class="mask_img" src="imgs/rendering/fangda.png">
					</li>
				</ul>
			</div>
			<!-- 瀑布流end -->

			<!-- 点击大图 -->
			<div class="hide_big_img">
				<!-- 背景 -->
				<div id="flowBigImg_mask"></div>
				<div id="flowBigImg">
					<!-- 内容 -->
					<div class="flowBigImgcon"></div>
				</div>
			</div>
		</div>

		<!-- footer -->
		<footer>
			<div class="footer_con">
				<div class="mali_div">
					<a href="">
						<img src="imgs/index/mail.jpg">
						<img src="imgs/index/mail_h.jpg">
					</a>					
				</div>
				<ul>
					<li>
						<a href="">
							<img src="imgs/index/facebook.jpg">
							<img src="imgs/index/facebook_h.jpg">
						</a>
					</li>
					<li>
						<a href="">
							<img src="imgs/index/youtube.jpg">
							<img src="imgs/index/youtube_h.jpg">
						</a>								
					</li>
					<li>
						<a href="">
							<img src="imgs/index/linkedln.jpg">
							<img src="imgs/index/linkedln_h.jpg">
						</a>		
					</li>
					<li>
						<a href="">
							<img src="imgs/index/twitter.jpg">
							<img src="imgs/index/twitter_h.jpg">
						</a>
					</li>
				</ul>
				<p>Copyright © 1998-2015 shining Group&nbsp;&nbsp;&nbsp;&nbsp;<a href="../写意数字/index.html">中文网</a></p>
			</div>
		</footer>
		
	</div>
</body>
<script type="text/javascript" src="js/jquery-3.1.1.min.js"></script>
<script type="text/javascript" src="js/general.js"></script>
<script type="text/javascript">
	// --------------------------------大图滚动-----------------

	var $carousel = $(".carousel");
	var $Banners = $(".carouselBox img");
	var $activeLis = $(".carouselActive li");

	var index = 0;
	var timer = 1;

	timerFn();
	function timerFn(){
		timer = setInterval(function(){
			index++;
			changeMoveFn();	
			if (index==2) {
				index = -1;
			}
		},5000);
	}

	function changeMoveFn(){
		$Banners.hide();
		$Banners.eq(index).fadeTo(500,1);
		$activeLis.css("background-color","gray");
		$activeLis.eq(index).css("background-color","#DADF00");
	}

	$activeLis.on("click",function(){
		index = $(this).index();
		changeMoveFn();
	})
	
	$carousel.mouseover(function(){
		clearInterval(timer);
	});

	$carousel.mouseout(function(){
		timerFn();
	})
	// --------------------------------大图滚动end-----------------

	// --------------------返回顶部------------------

	var $top_btn = $(".top_btn");

	$(document).scroll(function() {
		if ($(document).scrollTop()>0) {
			$top_btn.css("display","block");
		}else {
			$top_btn.css("display","none");
		}
	})

	$top_btn.on("click",function(){
		$("html,body").animate({
			scrollTop:0
		},2000)
	})

	// --------------------返回顶部------------------

	// -------------------点击查看图片-----------------------------------
	var $flowImgWraps = $(".flow_img_wrap");
	var $hide_big_img = $(".hide_big_img");
	var $flowBigImgcon = $(".flowBigImgcon");
	var $flowBigImg = $("#flowBigImg")
	
	var index = 0;

	// 显示
	$flowImgWraps.on("click",function(){
		$hide_big_img.css("display","block");
		index = $(this).index();
		// 调用大图改变函数
		flowBigImgChangeFn();
	});
	
	// 封装大图改变函数
	function flowBigImgChangeFn(){
		// 获取原图链接
		var imgSrc = $flowImgWraps.eq(index).find(".flow_img").attr("src");
		// 插入原图
		$flowBigImgcon.html("<img class='big_img' src='"+imgSrc+"'>");
		// 获取原图
		var $big_img = $(".big_img");

		// 获取原图宽高
		$artworkW = $big_img.width();
		$artworkH = $big_img.height();

		// 新的宽高
		$newImgH = $(window).height()*0.8;
		$newImgW = $artworkW/$artworkH*$newImgH;

		// 判断宽高比例
		if(0.6*$(window).width()*$flowBigImg.outerHeight()/$flowBigImg.outerWidth() > $(window).height()*0.8){
			$big_img.css("width",$newImgW);
		}else{
			$big_img.css("width",0.6*$(window).width());
		}

		// 赋予left top值
		$top = ($(window).height()-$flowBigImg.outerHeight())/2;
		$left = ($(window).width()-$flowBigImg.outerWidth())/2;

		$flowBigImg.css({
			"top":$top,
			"left":$left
		})
	}

	// 关闭
	var $flowBigImg_mask = $("#flowBigImg_mask")

	// 点击灰色背景隐藏
	$flowBigImg_mask.on("click",function(){
		$hide_big_img.css("display","none");
	})


// -----------------点击查看图片 end---------------------------

	// -----------------------------瀑布流-------------------------

	var $mask_img = $(".mask_img");
	var $flowImgs = $(".flow_img");
	var $maskDiv = $(".mask");

	// 遍历创建蒙版
	eachCreateMaskFn();
	function eachCreateMaskFn(){
		$flowImgs.each(function(){
			$maskDiv.eq($(this).index(".flow_img")).css({
				"width":$(this).width(),
				"height":$(this).height(),
				"background-color":"black",
			})
		})
	}

	var $flow = $("#flow");
	// 定义一个数组变量保存瀑布流中每一列的高度
	var arrH=[];

	var $flow_img_wrap = $(".flow_img_wrap:visible");
	
	var $imgs = $("img");
	$imgs.ready(function(){
		findMaxHeightFn();
  		flowFn();
	});
	
	flowFn();
	function flowFn(){
		
		var windowW = document.documentElement.clientWidth;
		var divNum = parseInt(windowW / $flow_img_wrap.eq(0).width());
		
		if (divNum<2) {
			divNum=2;
		}
		$flow_img_wrap.each(function(i){
			// 判断是否是第一排
			if (i<divNum) {
				$flow_img_wrap.eq(i).css({
					"left": i * $(this).outerWidth(true),
					"top":0
				})
				arrH[i] = $(this).outerHeight(true);
			}else {
				// 判断每一行中每列中的最小高度
				var minIndex = findMinHeightFn();
				// 改变对应div的位置
				$flow_img_wrap.eq(i).css({
					"left": minIndex * $(this).outerWidth(true),
					"top":arrH[minIndex] +"px"
				})
				arrH[minIndex] += $(this).outerHeight(true);
			}

		})
	}
	// 封装函数判断arrH数组里面最小的值
	// 返回对应数组中最小高度的下标
	function findMinHeightFn(){
		var minHeight = Math.min(...arrH);
		return arrH.indexOf(minHeight);
	}

	// 瀑布流赋height
	findMaxHeightFn();
	function findMaxHeightFn(){
		var maxHeight = Math.max(...arrH);
		$flow.css("height",maxHeight);
	}

	// 窗口改变事件 
	$(window).on("resize",function(){
		eachCreateMaskFn();
		arrH=[];
		flowFn();
		findMaxHeightFn();
		// flowBigImgChangeFn();
	})

	// -----------------------------瀑布流-------------------------
</script>
</html>
